oceny

<a id="aaa" href="#">Wyślij ocene</a>
<a id="bbb" href="#">Pobierz</a>
<a id="ccc" href="#">Pob</a>

<div class="ratingbooks">
{{#each books}}
    <div class="book">
        <p>Tytuł - {{this.title}}</p>
        <p>Autor - {{this.author}}</p>
        <p>Ocena - {{this.rate}}</p>
        <div class="rating">
            <div class="rate" style="--my-variable: 70%;"></div>
        </div>
        <div id="myRate" class="rating">
            <div class="rate" data-userrate="30%" style="--my-variable: 0%;"></div>
        </div>
    </div>
{{/each}}

</div>

<script>

    let userRate= $('#myRate .rate').data('userrate');
    $('#myRate .rate').css('--my-variable', userRate);

   $('#myRate .rate').on('mousemove', function(e) {
        var elementWidth = $(this).width();
        var offsetX = e.pageX - $(this).offset().left;
        var percentage = (offsetX / elementWidth) * 100;
        $(this).css('--my-variable', percentage + '%');

        $(this).on('click', function() {
            $(this).data('userrate', percentage + '%');
            //tu wypadałoby wysłać ocene do bazy danych
        });

        $(this).on('mouseleave', function() {
            let userRate= $(this).data('userrate');
            $(this).css('--my-variable', userRate);
        });
     });

</script>

<script>
    $('#aaa').click(function(e){
        e.preventDefault();
        $.ajax({
            url: '/rate',
            method: 'POST',
            data:{
                bookId: 71,
                rate: 5
            },
            success: function(response){
                console.log(response);
            }
        });
    });


    $('#ccc').click(function(e){
        e.preventDefault();
        $.ajax({
            url: '/rate',
            method: 'GET'
        });
    });
</script>